!function(t){"use strict";t(document).ready((function(){let n=!1;t(":input").on("change",(function(){n=!0})),t(".vmwbmdp-generate-transcription-btn").on("click",(function(e){if(e.preventDefault(),t(this).hasClass("is-busy"))return;t(this).addClass("is-busy").attr("disabled",!0);let i={action:"gtrans",security:vmwbmdpContacter.ajax_nonce,record_id:vmwbmdpContacter.record_id};function a(t){console.log(t),t.message?alert("ERROR:\n "+t.message):t.responseText?alert("ERROR:\n "+t.responseText):alert("ERROR:\n "+t)}t.post(ajaxurl,i,(function(e){if("ok"===e.status){if(t("#wp-vmwbmdptranscriptiontxt-wrap").hasClass("html-active"))t("#vmwbmdptranscriptiontxt").val(e.transcription);else{let t=tinyMCE.get("vmwbmdptranscriptiontxt");null!==t&&t.setContent(e.transcription)}""===e.transcription.trim()&&alert("Failed to recognize anything on this audio. Transcription is empty."),n=!0}else a(e)}),"json").fail((function(t){a(t)})).always((function(){t(".vmwbmdp-generate-transcription-btn").removeClass("is-busy").attr("disabled",!1)}))})),window.onbeforeunload=function(){if(n)return"It looks like you made changes and did not save it. Continue anyway?"},t("#publish").on("click",(function(){n=!1}))}))}(jQuery);