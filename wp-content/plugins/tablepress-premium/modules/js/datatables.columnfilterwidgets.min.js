(()=>{"use strict";function e(e,t){const n=/(^([+\-]?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?(?=\D|\s|$))|^0x[\da-fA-F]+$|\d+)/g,i=/^\s+|\s+$/g,a=/\s+/g,o=/^0x[0-9a-f]+$/i,r=/^0/,l=e.replace(i,"")||"",s=t.replace(i,"")||"",c=l.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),p=s.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=parseInt(l.match(o),16)||1!==c.length&&Date.parse(l),u=parseInt(s.match(o),16)||d&&s.match(/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/)&&Date.parse(s)||null,f=function(e,t){return(!e.match(r)||1===t)&&parseFloat(e)||e.replace(a," ").replace(i,"")||0};if(u){if(d<u)return-1;if(d>u)return 1}for(let e=0,t=c.length,n=p.length,i=Math.max(t,n);e<i;e++){const i=f(c[e]||"",t),a=f(p[e]||"",n);if(isNaN(i)!==isNaN(a))return isNaN(i)?1:-1;if(/[^\x00-\x80]/.test(i+a)&&i.localeCompare){const e=i.localeCompare(a);return e/Math.abs(e)}if(i<a)return-1;if(i>a)return 1}}!function(t){t.fn.dataTableExt.oApi.fnGetColumnData=function(e,t){return e.oInstance.api().column(t,{search:"applied"}).data().sort().unique()};var n=function(e){var n=this,a="";return n.$WidgetContainer=t('<div class="column-filter-widgets"></div>'),n.$MenuContainer=n.$WidgetContainer,n.$TermContainer=null,n.aoWidgets=[],n.sSeparator="","oColumnFilterWidgets"in e.oInit&&("aiExclude"in e.oInit.oColumnFilterWidgets&&(a="|"+e.oInit.oColumnFilterWidgets.aiExclude.join("|")+"|"),"bGroupTerms"in e.oInit.oColumnFilterWidgets&&e.oInit.oColumnFilterWidgets.bGroupTerms&&(n.$MenuContainer=t('<div class="column-filter-widget-menus"></div>'),n.$TermContainer=t('<div class="column-filter-widget-selected-terms"></div>').hide())),t.each(e.aoColumns,(function(o){var r=t('<div class="column-filter-widget"></div>');a.indexOf("|"+o+"|")<0&&(n.aoWidgets.push(new i(r,e,o,n)),n.$MenuContainer.append(r))})),n.$TermContainer&&(n.$WidgetContainer.append(n.$MenuContainer),n.$WidgetContainer.append(n.$TermContainer)),e.aoDrawCallback.push({name:"ColumnFilterWidgets",fn(){t.each(n.aoWidgets,(function(e,t){t.fnDraw()}))}}),n};n.prototype.getContainer=function(){return this.$WidgetContainer.get(0)};var i=function(e,n,i,a){var o=this;o.iColumn=i,o.oColumn=n.aoColumns[i],o.$Container=e,o.oDataTable=n.oInstance,o.asFilters=[],o.sSeparator="",o.bSort=!0,o.iMaxSelections=-1,"oColumnFilterWidgets"in n.oInit&&("sSeparator"in n.oInit.oColumnFilterWidgets&&(o.sSeparator=n.oInit.oColumnFilterWidgets.sSeparator),"iMaxSelections"in n.oInit.oColumnFilterWidgets&&(o.iMaxSelections=n.oInit.oColumnFilterWidgets.iMaxSelections),"aoColumnDefs"in n.oInit.oColumnFilterWidgets&&t.each(n.oInit.oColumnFilterWidgets.aoColumnDefs,(function(e,n){("|"+n.aiTargets.join("|")+"|").indexOf("|"+i+"|")>=0&&t.each(n,(function(e,t){o[e]=t}))}))),o.$Select=t("<select></select>").addClass("widget-"+o.iColumn).on("change",(function(){var e,n,i,r=o.$Select.val();""!==r&&(e=t("<div>"+r+"</div>").text(),n=t('<a class="filter-term" href="#"></a>').addClass("filter-term-"+e.toLowerCase().replace(/\W/g,"")).text(e).on("click",(function(){return o.asFilters=t.grep(o.asFilters,(function(e){return e!==r})),n.remove(),a.$TermContainer&&0===a.$TermContainer.find(".filter-term").length&&a.$TermContainer.hide(),o.$Select.append(t("<option></option>").val(r).text(e)),o.iMaxSelections>0&&o.iMaxSelections>o.asFilters.length&&o.$Select.prop("disabled",!1),o.bSort&&o.fnSortOptions(),o.fnFilter(),!1})),o.asFilters.push(r),a.$TermContainer?(a.$TermContainer.show(),a.$TermContainer.prepend(n)):o.$Select.after(n),i=o.$Select.children("option:selected"),o.$Select.val(""),i.remove(),o.iMaxSelections>0&&o.iMaxSelections<=o.asFilters.length&&o.$Select.prop("disabled",!0),o.fnFilter())})),o.$Container.append(o.$Select),o.fnDraw()};i.prototype.fnFilter=function(){var e=this;if(e.asFilters.length>0){var n=[];t.each(e.asFilters,(function(e,t){n.push(t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"))}));var i=e.sSeparator?"(^|"+e.sSeparator+")(":"^(",a=e.sSeparator?")("+e.sSeparator+"|$)":")$";e.oDataTable.fnFilter(i+n.join("|")+a,e.iColumn,!0,!1)}else e.oDataTable.fnFilter("",e.iColumn)},i.prototype.fnSortOptions=function(){var n=this,i=n.$Select.find("option").slice(1);i.sort((function(i,a){var o=t(i).text(),r=t(a).text();return n.hasOwnProperty("fnSort")?n.fnSort(o,r):e?e(o,r):o<r?-1:o===r?0:1})),n.$Select.append(i)},i.prototype.fnDraw=function(){var e=this;if(0===e.asFilters.length){var n={},i=[],a=e.oDataTable.fnGetColumnData(e.iColumn);t.each(a,(function(a,o){var r=e.sSeparator?o.split(new RegExp(e.sSeparator)):[o];t.each(r,(function(e,t){""===t||n.hasOwnProperty(t)||(n[t]=!0,i.push(t))}))}));var o=t("<div>"+e.oColumn.sTitle+"</div>").text();e.$Select.empty().append(t("<option selected disabled></option>").val("").text(o)),t.each(i,(function(n,i){var a=t("<div>"+i+"</div>").text().replace(/\n/," ");e.$Select.append(t("<option></option>").val(a).text(a))})),i.length>0?(e.bSort&&e.fnSortOptions(),e.$Select.prop("disabled",!1)):e.$Select.prop("disabled",!0)}},t.fn.dataTableExt.aoFeatures.push({fnInit:e=>new n(e).getContainer(),cFeature:"W",sFeature:"ColumnFilterWidgets"})}(jQuery)})();
